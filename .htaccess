RewriteEngine On

# Skip rewriting if the request already starts with /website/
RewriteCond %{REQUEST_URI} !^/website/

# Skip redirect if the request is for an existing file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Redirect to website/ preserving the path
#RewriteRule %{REQUEST_URI} /website/$1 [L,R=301]

AddType 'text/html; charset=UTF-8' html    
AddType image/webp .webp

<IfModule mod_expires.c>
	# CACHE EXPIRATION #
	ExpiresActive On
	ExpiresDefault A300
	ExpiresByType image/x-icon A2592000
	ExpiresByType application/x-javascript A3600
	ExpiresByType text/css A3600
	ExpiresByType image/gif A604800
	ExpiresByType image/png A604800
	ExpiresByType image/jpeg A604800
	ExpiresByType image/jpeg A604800
	ExpiresByType text/plain A300
	ExpiresByType application/x-shockwave-flash A604800
	ExpiresByType video/x-flv A604800
	ExpiresByType application/pdf A604800
	ExpiresByType text/html A300
	# CACHE EXPIRATION #
</IfModule>

<IfModule mod_deflate.c>
    # Enable compression for common MIME types
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE text/javascript

    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/json
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/xml

    # Fonts
    AddOutputFilterByType DEFLATE font/ttf
    AddOutputFilterByType DEFLATE font/otf
    AddOutputFilterByType DEFLATE font/opentype
    AddOutputFilterByType DEFLATE application/font-woff
    AddOutputFilterByType DEFLATE application/font-woff2

    # Images
    AddOutputFilterByType DEFLATE image/svg+xml
    AddOutputFilterByType DEFLATE image/x-icon
</IfModule>

# Remove browser bugs (only needed for really old browsers)
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
Header append Vary User-Agent
